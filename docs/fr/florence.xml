<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
	<!ENTITY gfdl SYSTEM "gfdl.dbk">
	<!ENTITY date "Fevrier 2009">
]>
<article id="index" lang="fr">
<articleinfo>
	<date>2009-03-11</date>
	<title>Documentation du clavier virtuel Florence</title>
	<abstract><para>Ce document décrit l'installation, la configuration et l'utilisation du clavier virtuel Florence.</para></abstract>
	<authorgroup>
		<author>
			<firstname>François</firstname>
			<surname>Agrech</surname>
			<email>f.agrech@gmail.com</email>
		</author>
	</authorgroup>
	<copyright><year>2008, 2009</year><holder>François Agrech</holder></copyright>
	<legalnotice><para>Copyright (c) 2008, 2009 François Agrech.</para>
	<para>Cette documentation est mise à disposition sous la license GNU FDL. Seule la version en anglais de cette license existe et a une valeur légale. Une copie de la license est disponible à la fin de ce document en anglais.</para>
	<para>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled "GNU Free Documentation License".</para></legalnotice>
</articleinfo>
<indexterm><primary>florence</primary></indexterm>
<indexterm><primary>virtual keyboard</primary></indexterm>
<sect1 id="intro">
	<title>Introduction</title>
	<para>Florence est un clavier virtuel pour GNOME extensible et redimensionnable. Vous avez besoin de Florence si vous ne pouvez pas utiliser un vrai clavier matériel, par exemple à cause d'un handicap, parce que votre clavier est cassé ou parce que vous utilisez un PC tablette. Cependant, vous devez être en mesure d'utiliser un périphérique de pointage (comme une souris, un trackball, ou un écran tactile) pour utiliser Florence ; si vous ne pouvez pas utiliser un périphérique de pointage, il y a <ulink url="http://www.gok.ca/gok">gok</ulink>, qui peut être utilisé avec de simples connecteurs.</para>
	<para>Florence reste hors de votre vue lorsque vous n'en avez pas besoin: le clavier apparaît à l'écran uniquement lorsque vous en avez besoin. Une fonctionnalité de click automatique basée sur un minuteur est disponible pour aider les personnes handicapées qui ont des difficultés à cliquer</para>
	<para>Florence est principalement conçu pour être utilisé avec le bureau GNOME, mais peut être utilisé avec n'importe quel environnement de bureau (voir la section à propos des autres bureaux)</para>
</sect1>
<sect1 id="install">
	<title>Installation</title>
	<para>Si ce n'est pas déjà installé, il va falloir compiler Florence depuis un terminal sauf si vous utilisez <ulink url="http://fedoraproject.org">Fedora</ulink> 9 ou supérieur, car il y a un paquetage pour Fedora (grâce à Simon Wesp) au 8 décembre 2008. Si vous ne pouvez pas utiliser de clavier, il se peut que vous ne puissiez pas installer Florence parce que vous ne pouvez pas utiliser Florence. Si vous êtes handicapé, vous devriez demander à quelqu'un de l'installer pour vous, et si vous utilisez un PC tablette, vous devriez trouver une façon créative de l'installer, comme ssh ou un autre clavier de manière temporaire.</para>
	<para>Sur <ulink url="http://fedoraproject.org">Fedora</ulink>, vous pouvez simplement utiliser le gestionnaire de paquetages. En la ligne de commande, tapez:
		<prompt>#</prompt> <userinput>yum install florence</userinput>
	</para>
	<para>Soyez sûr que vous avez la dernière version de Florence (0.4.0 au 11 mars 2009). Vous pouvez la télécharger ici: <ulink url="http://sourceforge.net/project/platformdownload.php?group_id=217749">Sourceforge</ulink></para>
	<sect2>
		<title>Préparation des dépendances</title>
		<para>Afin de compiler Florence, vous avez besoin d'un environnement de compilation et des commandes suivantes: make, scrollkeeper et un compilateur C, ainsi que les paquetages dépendants suivants:</para>
		<orderedlist>
			<listitem><para><ulink url="http://www.gtk.org/download-linux.html">gtk+</ulink> (version >= 2.10)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/at-spi/">cspi</ulink> (version >= 1.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/GConf/">libgconf</ulink> (version >= 2.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/libglade/">libglage</ulink> (version >=2.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/libxml2/">libxml</ulink> (version >=2.0)</para></listitem>
			<listitem><para><ulink url="http://www.cairographics.org/download/">cairo</ulink></para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/GNOME/sources/librsvg/">librsvg</ulink></para></listitem>
			<listitem><para>(Optionnel: option --disable-nls de configure pour désactive) <ulink url="http://www.gnu.org/software/gettext/">gettext</ulink></para></listitem>
			<listitem><para>(Optionnel: option --with-docs de configure) libgnome (version >=2.0)</para></listitem>
		</orderedlist>
		<para>La manière d'installer ces dépendances dépend de la distribution utilisée. D'habitude, vous devez installer les paquetages de développement de ces dépendances. Ci-dessous se trouve une liste d'instructions pour les installer depuis la ligne de commande pour les distributions les plus communes. Si votre distribution n'est pas listée et que vous ne savez pas comment installer les dépendances, vous devriez vous adresser au support de votre distribution.</para>
		<orderedlist>
			<listitem>
				<para><ulink url="http://www.mandriva.com/">Mandriva</ulink>
				<screen>
<prompt>$</prompt> <userinput>su</userinput>
<prompt>#</prompt> <userinput>urpmi gcc make libxml2-dev libgconf2-dev libglade2-devel \</userinput>
<prompt>></prompt> <userinput>at-spi-devel libcairo-devel libgnome2-devel librsvg2-devel gettext</userinput>
				</screen></para>
			</listitem>
			<listitem>
				<para><ulink url="http://www.ubuntu.com/">Ubuntu</ulink>
				<screen>
<prompt>$</prompt> <userinput>sudo apt-get install build-essential libxml2-dev libgconf2-dev \</userinput>
<prompt>></prompt> <userinput>libglade2-dev libatspi-dev libcairo2-dev libgnome2-dev librsvg2-dev gettext</userinput>
				</screen></para>
			</listitem>
		</orderedlist>
	</sect2>
	<sect2>
		<title>Installation</title>
		<para>L'installation de Florence se déroule comme l'installation de n'importe quel programme qui utilise les GNU autotools. Ouvrez un terminal et lancez les commandes suivantes:</para>
		<screen>
<prompt>$</prompt> <userinput>tar -xjvf florence-0.3.3.tar.bz2</userinput>
<prompt>$</prompt> <userinput>cd florence-0.3.3</userinput>
<prompt>$</prompt> <userinput>./configure --prefix=/usr</userinput>
<prompt>$</prompt> <userinput>make</userinput>
<prompt>$</prompt> <userinput>su -c "make install"</userinput>
		</screen>
		<para>Pour Ubuntu, remplacez la dernière commande par: </para><screen><prompt>$</prompt> <userinput>sudo make install</userinput></screen>
		<para>Si vous ne voulez pas installer dans /usr (option prefix de configure), n'oubliez pas d'ajouter le chemin au fichier /etc/scrollkeeper.conf, pour que yelp retrouve la documentation de Florence.</para>
		<para>Vous trouverez la liste complète des options de configure avec la commande:</para>
		<screen>
<prompt>$</prompt> <userinput>./configure --help</userinput>
		</screen>
	</sect2>
	<sect2>
		<title>Désinstallation</title>
		<para>Désinstaller est aussi facile qu'installer.</para>
		<screen>
<prompt>$</prompt> <userinput>cd florence-0.3.3</userinput>
<prompt>$</prompt> <userinput>su -c "make uninstall"</userinput>
		</screen>
		<para>Pour Ubuntu:</para><screen><prompt>$</prompt> <userinput>sudo make uninstall</userinput></screen>
	</sect2>
</sect1>
<sect1 id="usage">
	<title>Utilisation</title>
	<para>Le but de Florence est d'être facile. Pour lancer Florence depuis la ligne de commande, tapez:</para>
		<screen>
<prompt>$</prompt> <userinput>florence</userinput>
		</screen>
	<para>Ou, depuis le bureau GNOME, cliquez <guimenu>Applications</guimenu>-><guisubmenu>Accessibilité</guisubmenu>-><guimenuitem>Clavier virtuel Florence</guimenuitem>.
Si vous préférez que Florence soit lancé au démarrage de GNOME, choisissez le menu <guimenu>Système</guimenu>-><guisubmenu>Préférences</guisubmenu>-><guimenuitem>Sessions</guimenuitem>, cliquez sur l'onglet <guibutton>Programmes au démarrage</guibutton>, puis cliquez <guibutton>Ajouter</guibutton> et entrez <command>/usr/bin/florence</command> pour que Florence soit lancé avec GNOME au prochain démarrage.</para>
	<para>Il est nécessaire d'activer l'accessibilité de GNOME pour utiliser Florence (cela veut dire que le daemon at-spi est lancé) ; si cela n'est pas activé, Florence ne se lancera pas mais suggèrera plutôt d'activer l'accessibilité et de relancer GNOME. Lorsque GNOME sera relancé et l'accessibilité activée, alors Florence se lancera normalement.</para>
	<para>Lorsque florence est en cours de fonctionnement, une icône devrait être visible dans la zone de notification du bureau, habituellement dans l'angle en haut à droite de l'écran. Cliquez sur l'icône pour cacher et montrer le clavier Florence. Un click droit fait apparaître un menu. Dans ce menu, vous pouvez utiliser le choix <guimenuitem>quit</guimenuitem> pour arrêter Florence.</para>
	<sect2>
		<title>Les modes de Florence</title>
		<para>Florence a différents états qui affectent sa façon d'interagir avec l'utilisateur.</para>
		<para>Dans le mode 'click automatique', vous n'avez pas besoin d'utiliser les boutons de la souris pour taper sur le clavier. Vous n'avez qu'à mettre le pointeur sur une touche et le minuteur est déclenché. Si le pointer reste sur la touche jusqu'à que le minuteur expire, la touche est automatiquement 'cliquée' (pressée). La durée du minuteur peut être réglée dans l'interface de configuration en millisecondes. Lorsqu'il est réglé à 0ms, le mode 'click automatique' est désactivé: vous devez pointer une touche et cliquer pour déclencher une pression de la touche.</para>
		<para>Un autre mode est le mode 'cacher automatiquement'. Dans ce mode, Florence se cache lorsqu'il détecte que vous n'en avez pas besoin. Il y a quelques règles pour détecter quand vous avez besoin de Florence et ces règles utilisent les évènements de <ulink url="http://en.wikipedia.org/wiki/AT-SPI">at-spi</ulink>. Par exemple, Florence se montrera si un objet de texte éditable est sélectionné, car il est probable que vous avez besoin d'un clavier pour l'éditer. Florence se cachera ensuite si l'objet texte éditable est désélectionné. Cela ne marche pas si l'objet n'est pas accessible avec la technologie <ulink url="http://en.wikipedia.org/wiki/AT-SPI">at-spi</ulink>. En particulier, les objets QT3 pourraient ne pas fonctionner correctement avec Florence. Vous devriez vous assurer que vos applications fonctionnent avec at-spi si vous avez l'intention d'utiliser Florence en mode caché. Quand ce mode est désactivé, Florence reste toujours visible à l'écran.</para>
		<figure id="extensions">
			<title>Extensions de Florence</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/florence.png" format="PNG"/></imageobject>
					<textobject><phrase>Montre les extensions disponibles.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<para>De plus, l'arrangement du clavier peut être étendu avec 3 extensions au clavier principal. Le pavé des flèches (arrows keypad) est une extension à droite du clavier principal qui contient les flèches et les touches de navigation. Le pavé numérique (numpad) contient les touches numériques et l'extension des touches de fonction (function keys) contient les touches de fonction. Chaque extension est activable et désactivable.</para>
	</sect2>
	<sect2 id="config">
		<title>Configuration</title>
		<para>La fenêtre de configuration est accessible par l'icône de la zone de notification (cliquez droit sur celle-ci et sélectionnez <guimenuitem>Préférences</guimenuitem>) ou depuis la ligne de commande avec l'option -c ou --config: <command>florence --config</command>. Il est possible de bidouiller la configuration par gconf (voir la section bidouillage)</para>
		<para>Certaines options sélectionnées ne sont prises en compte que lorsque vous cliquez sur le bouton 'appliquer' dans le dialogue des préférences. D'autres options sont appliquées immédiatement et peuvent être annulées avec le bouton 'Annuler' tant qu'elles n'ont pas été appliquées.</para>
		<para>Les paramètres de configuration ont été divisé en 4 groupes pour faciliter la recherche et la compréhension.</para>
		<sect3><title>Configuration du style</title>
		<figure id="style">
			<title>Dialogue des préférences du style</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/style.png" format="PNG"/></imageobject>
					<textobject><phrase>Montre le dialogue des préférences du style.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<para>Les options de style suivantes peuvent être configurées:</para>
		<orderedlist>
			<listitem><para>Liste des styles: sélectionnez votre style en cliquant sur son icône.</para></listitem>
			<listitem><para>Couleur des touches normales: change la couleur de fond des touches normales.</para></listitem>
			<listitem><para>Couleur des touches actives: change la couleur de fond des touches pressées ou bloquées.</para></listitem>
			<listitem><para>Couleur de la touche sélectionnée: change la couleur de la touche qui se trouve sous le pointeur.</para></listitem>
			<listitem><para>Couleur des symboles: change la couleur des symboles affichés sur les touches.</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Configuration de la fenêtre</title>
		<figure id="window">
			<title>Dialogue des préférences de la fenêtre</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/fenetre.png" format="PNG"/></imageobject>
					<textobject><phrase>Montre le dialogue des préférences de la fenêtre.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<orderedlist>
			<listitem><para>Décorée: décore la fenêtre avec une barre de titre. Permet de positionner la fenêtre.</para></listitem>
			<listitem><para>Transparente: permet de voir les fenêtres derrière le clavier entre les touches et de cliquer sur celles-ci.</para></listitem>
			<listitem><para>Redimensionnable: permet de changer la dimension visuelle du clavier par le gestionnaire de fenêtre. Sur certains gestionnaires de fenêtre, il est nécessaire que l'option décorée soit activée pour redimensionner une fenêtre.</para></listitem>
			<listitem><para>Barre des tâches: fait apparaître Florence dans la barre des taches du bureau.</para></listitem>
			<listitem><para>Toujours au dessus: demande au gestionnaire de fenêtre de toujours garder le clavier au dessus des autres fenêtres.</para></listitem>
			<listitem><para>Opacité: règle l'opacité de la fenêtre pour voir les autres fenêtres à travers les touches du clavier. Pour que cela fonctionne, il faut que le gestionnaire de fenêtre supporte l'effet 'composite' et qu'il soit activé. Pour metacity, il faut régler la clé gconf /apps/metacity/general/compositing_manager avec gconf-editor ou gconftool-2.</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Configuration du comportement</title>
		<figure id="behaviour">
			<title>Dialogue des préférences du comportement</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/comportement.png" format="PNG"/></imageobject>
					<textobject><phrase>Montre le dialogue des préférences du comportement.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<orderedlist>
			<listitem><para>Click automatique: change la durée du minuteur du mode click automatique (0 désactive le mode click automatique).</para></listitem>
			<listitem><para>Disparition automatique: bascule entre les modes 'disparition automatique' et toujours visible.</para></listitem>
			<listitem><para>Déplacer vers l'objet sélectionné: cette option n'est disponible que lorsque le mode 'disparition automatique' est activé. Lorsqu'elle est activée, le clavier sera repositionné à chaque fois qu'un autre objet éditable est sélectionné pou minimiser les aller-retours de la souris.</para></listitem>
			<listitem><para>icône intermédiaire: En mode disparition automatique, ne pas faire apparaître le clavier directement sur les objets éditable mais afficher une icône intermédiaire à la place. Cliquez sur l'icône intermédiaire pour faire apparaître le clavier. Cette option rend Florence moins intrusive: si par exemple vous désirer lire un document sans l'éditer, l'îcone prend moins de place à l'écran que le clavier.</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Configuration de l'agencement</title>
		<figure id="layout">
			<title>Dialogue des préférences de l'agencement</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/agencement.png" format="PNG"/></imageobject>
					<textobject><phrase>Montre le dialogue des préférences de l'agencement.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<orderedlist>
			<listitem><para>Touches de navigation: active/désactive le pavé des flèches.</para></listitem>
			<listitem><para>Touches numériques: active/désactive le pavé numérique.</para></listitem>
			<listitem><para>Touches de fonction: active/désactive les touches de fonction.</para></listitem>
		</orderedlist>
i		</sect3>
	</sect2>
	<sect2>
		<title>Options de la ligne de commande</title>
		<para>Florence accepte les options de ligne de commande suivantes:</para>
		<orderedlist>
			<listitem><para>-h (--help): affiche un message d'aide et quitte.</para></listitem>
			<listitem><para>-V (--version): affiche la version de Florence et quitte.</para></listitem>
			<listitem><para>-c (--config): ouvre la fenêtre de dialogue de configuration.</para></listitem>
			<listitem><para>-d (--debug): lance Florence en mode bavard.</para></listitem>
		</orderedlist>
	</sect2>
</sect1>
<sect1 id="tips">
	<title>Utilisation de Florence sans GNOME</title>
	<para>Florence est principalement conçu pour être utilisé avec un bureau GNOME. Le clavier Florence utilise les bibliothèques communément installées avec un bureau GNOME. Cependant, vous pouvez installer ces bibliothèques avec n'importe quel bureau pour utiliser Florence. Les paquetages nécessaires pour avoir toutes les bibliothèques sont listées dans la section installation.</para>
	<para>Pour que Florence fonctionne, il faut démarrer le daemon d'enregistrement de at-spi au démarrage de la session: Pour démarrer le daemon d'enregistrement de at-spi (au démarrage de la session):</para>
	<orderedlist>
		<listitem><para>Gentoo:</para>
		<screen>
<prompt>$</prompt> <userinput>/usr/libexec/at-spi-registryd &amp;</userinput>
		</screen></listitem>
		<listitem><para>Mandriva:</para>
		<screen>
<prompt>$</prompt> <userinput>/usr/lib/at-spi-registryd &amp;</userinput>
		</screen></listitem>
	</orderedlist>
	<para>Certaines distributions pourraient mettre la commande at-spi-registryd ailleurs. Utilisez la commande find pour trouver où votre distribution a mis at-spi-registryd:</para>
	<screen>
<prompt>$</prompt> <userinput>find /usr -name at-spi-registryd</userinput>
	</screen>
	<para>Adaptez la commande à lancer au démarrage en fonction du résultat.</para>
	<para>GNOME démarre le daemon automatiquement si il est configuré avec le dialogue <command>gnome-at-property</command></para>
	<para>Si votre environnement de bureau est compatible XDG (comme XFCE par exemple), Florence devrais être accessible depuis le menu. De toute façon, le lancement de Florence par la ligne de commande marchera toujours. Si vous n'avez pas de zone de notification, vous pouvez installer <ulink url="http://peksystray.sourceforge.net/">peksystray</ulink>. Vous pouvez aussi accéder au dialogue de préférences avec la commande:</para>
	<screen>
<prompt>$</prompt> <userinput>florence --config</userinput>
	</screen>
	<para>Notez que les applications QT3 ne sont pas compatibles avec at-spi. En conséquence, vous ne devriez pas utiliser le mode caché avec KDE3.</para>
</sect1>
<sect1 id="faq">
	<title>FAQ (Questions Fréquemment Posées)</title>
	<qandaset defaultlabel='qanda'>
		<qandaentry>
			<question>
				<para>Est-ce que Florence supporte les claviers internationaux avec des caractères non-européens (arabe, chinois, etc)?</para>
			</question>
			<answer>
				<para>Oui. Florence supporte tous les claviers et caractères supportés pas X. Pour utiliser un clavier différent, il suffit d'utiliser la commande setxkbmap avant de lancer florence. Par exemple, pour utiliser un clavier arabe dans Florence, utilisez la commande suivante:</para>
		<screen>
<prompt>$</prompt> <userinput>setxkbmap ar &amp;&amp; florence</userinput>
		</screen>
			</answer>
		</qandaentry>
		<qandaentry>
			<question>
				<para>Florence se lance mais les touches du clavier n'ont aucun effet.</para>
			</question>
			<answer>
				<para>Il est fort probable que le daemon at-spi-registryd n'est pas lancé. Vérifiez que le daemon at-spi-requstryd soit lancé au démarrage de votre environnement de bureau. Si vous utilisez GNOME, utilisez le dialogue gnome-at-properties pour cela.</para>
			</answer>
		</qandaentry>
	</qandaset>
</sect1>
<sect1 id="hacking">
	<title>Bidouillage</title>
	<para>Certaines options de configuration supplémentaires sont disponibles dans GConf (sous apps/florence). Vous pouvez modifier la configuration aussi bien avec le menu de configuration de florence qu'avec gconftool-2 ou gconf-editor.</para>
	<para>La clé apps/florence/layout/file de gconf indique le chemin vers le fichier d'agencement des touches du clavier. Il s'agît d'un fichier XML que vous pouvez copier et modifier.</para>
</sect1>
<sect1 id="gethelp">
	<title>Se faire aider</title>
	<para>Vous pouvez obtenir de l'aide sur le <ulink url="https://sourceforge.net/forum/forum.php?forum_id=784280">forum</ulink> ou demander de l'aide par email à f.agrech@gmail.com</para>
</sect1>
<sect1 id="help">
	<title>Contribuer</title>
	<para>Si vous désirez aider le projet Florence, s'il vous plaît, veuillez envoyer un email à f.agrech@gmail.com</para>
</sect1>
&gfdl;
</article>

