<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
	<!ENTITY gfdl SYSTEM "gfdl.dbk">
	<!ENTITY date "February, the 25 of 2010">
	<!ENTITY version "0.4.7">
]>
<article id="index" lang="en">
<articleinfo>
	<title>Florence documentation</title>
	<abstract role="description"><para>This document describes how to install, configure and use Florence virtual keyboard.</para></abstract>
	<authorgroup>
		<author role="maintainer">
			<firstname>François</firstname>
			<surname>Agrech</surname>
			<email>f.agrech@gmail.com</email>
		</author>
	</authorgroup>
	<revhistory>
    		<revision> 
			<revnumber>&version;</revnumber> 
			<date>&date;</date> 
    		</revision> 
	</revhistory>
	<copyright><year>2008,2009,2010</year><holder>François Agrech</holder></copyright>
	<legalnotice>
		<para>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.2 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled "GNU Free Documentation License".</para>
	</legalnotice>
</articleinfo>
<indexterm><primary>florence</primary></indexterm>
<indexterm><primary>virtual keyboard</primary></indexterm>
<sect1 id="intro">
	<title>Introduction</title>
	<para>Florence is an extensible scalable virtual keyboard for GNOME. You need it if you can't use a real hardware keyboard, for example because you are disabled, your keyboard is broken or because you use a tablet PC, but you must be able to use a pointing device (as a mouse, a trackball or a touchscreen); If you can't use a pointing device, there is <ulink url="http://www.gok.ca/gok">gok</ulink>, which can be used with just simple switches.</para>
	<para>Florence stays out of your way when you don't need it: it appears on the screen only when you need it.
A Timer-based auto-click functionality is available to help disabled people having difficulties to click.</para>
	<para>Florence is primarily intended to be used with the GNOME desktop, although it can be used on any desktop environment (see the section about running Florence without GNOME).</para>
</sect1>
<sect1 id="install">
	<title>Install</title>
	<para>If it's not installed already, you will need to build Florence from the terminal, unless you are on <ulink url="http://fedoraproject.org">Fedora</ulink> 9 or later (Thanks to Simon Wesp), as it is the only distribution to include Florence as a package, as of December, the 8th of 2008. If you can't use a keyboard, you may find yourself in a catch-22 situation where you can't install Florence because you can't use Florence. If you are disabled, you may need to ask someone to install it for you and if you have a tablet PC, you may need to find a creative way to install Florence, such as installing from ssh or temporarily use a real keyboard.</para>
	<para>On Fedora, just use the package manager. From the command line, you can type:
<prompt>#</prompt> <userinput>yum install florence</userinput>
	</para>
	<para>Make sure you have the latest version of Florence (&version; as of &date;). You can get it at <ulink url="http://sourceforge.net/project/platformdownload.php?group_id=217749">Sourceforge</ulink></para>
	<sect2>
		<title>Preparing the dependencies</title>
		<para>In order to build Florence, you need a build environment with the following commands: make, scrollkeeper and a C compiler, along with the following package dependencies:</para>
		<orderedlist>
			<listitem><para><ulink url="http://www.gtk.org/download-linux.html">gtk+</ulink> (version &gt;= 2.10)</para></listitem>
			<listitem><para>(Optional: --with-at-spi configure option) <ulink url="http://ftp.gnome.org/pub/gnome/sources/at-spi/">cspi</ulink> (version &gt;= 1.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/GConf/">libgconf</ulink> (version &gt;= 2.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/libglade/">libglage</ulink> (version &gt;= 2.0)</para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/gnome/sources/libxml2/">libxml</ulink> (version &gt;= 2.0)</para></listitem>
			<listitem><para><ulink url="http://www.cairographics.org/download/">cairo</ulink></para></listitem>
			<listitem><para><ulink url="http://ftp.gnome.org/pub/GNOME/sources/librsvg/">librsvg</ulink></para></listitem>
			<listitem><para><ulink url="http://www.gnu.org/software/gettext/">gettext</ulink></para></listitem>
			<listitem><para>intltool (version &gt;= 0.23)</para></listitem>
			<listitem><para>(Optional: --with-docs configure option) gnome-doc-utils</para></listitem>
			<listitem><para>(Optional: --with-libnotify configure option) libnotify</para></listitem>
			<listitem><para>(Optional: --with-xtst configure option) libxtst</para></listitem>
		</orderedlist>
		<para>How to install those dependencies is dependant on your distribution. Usually, you need to install the devel packages of the dependencies. Below is a list of how to do it via the command line interface on the most common distributions. If your distribution is not listed and you don't know how to install, you may check with your distribution support.</para>
		<orderedlist>
			<listitem>
				<para>Red Hat/CentOS
				<screen>
<prompt>$</prompt> <userinput>su</userinput>
<prompt>#</prompt> <userinput>yum install gcc make libxml2-devel libglade2-devel at-spi-devel \</userinput>
<prompt>></prompt> <userinput>librsvg2-devel GConf2-devel libnotify-devel libXtst-devel gnome-doc-utils \</userinput>
<prompt>></prompt> <userinput>gettext intltool</userinput>
				</screen></para>
				<para><ulink url="http://www.mandriva.com/">Mandriva</ulink>
				<screen>
<prompt>$</prompt> <userinput>su</userinput>
<prompt>#</prompt> <userinput>urpmi gcc make libxml2-dev libgconf2-dev libglade2-devel \</userinput>
<prompt>></prompt> <userinput>at-spi-devel libcairo-devel gnome-doc-utils librsvg-devel gettext \</userinput>
<prompt>></prompt> <userinput>libnotify libxtst6-devel intltool</userinput>
				</screen></para>
			</listitem>
			<listitem>
				<para><ulink url="http://www.ubuntu.com/">Ubuntu</ulink>
				<screen>
<prompt>$</prompt> <userinput>sudo apt-get install build-essential libxml2-dev libgconf2-dev \</userinput>
<prompt>></prompt> <userinput>libglade2-dev libatspi-dev libcairo2-dev gnome-doc-utils librsvg2-dev gettext \</userinput>
<prompt>></prompt> <userinput>libnotify-dev libxtst-dev intltool</userinput>
				</screen></para>
			</listitem>
		</orderedlist>
	</sect2>
	<sect2>
		<title>Installing</title>
		<para>Installing Florence is like installing any program that uses the GNU autotools. Open a terminal and type the following commands:</para>
		<screen>
<prompt>$</prompt> <userinput>tar -xjvf florence-&version;.tar.bz2</userinput>
<prompt>$</prompt> <userinput>cd florence-&version;</userinput>
<prompt>$</prompt> <userinput>./configure --prefix=/usr</userinput>
<prompt>$</prompt> <userinput>make</userinput>
<prompt>$</prompt> <userinput>su -c "make install"</userinput>
		</screen>
		<para>For Ubuntu, replace the last command with:</para><screen><prompt>$</prompt> <userinput>sudo make install</userinput></screen>
		<para>If you have a recent distro with the new Xorg 1.6 (Mandriva 2009.1, Ubuntu 9.04, Fedora 11 ...), please add the --without-xrecord option to ./configure:</para>
		<screen>
<prompt>$</prompt> <userinput>./configure --prefix=/usr --without-xrecord</userinput>
		</screen>
		<para>Indeed, the XRECORD extension is severely broken in Xorg 1.6. See bugs <ulink url="http://bugs.freedesktop.org/show_bug.cgi?id=20500">20500</ulink> and <ulink url="http://bugs.freedesktop.org/show_bug.cgi?id=21971">21971</ulink> for more information.</para>
		<para>If you don't want to install in /usr (configure prefix), don't forget to add the path to /etc/scrollkeeper.conf file, so yelp can find Florence documentation.</para>
		<para>Check the list of other configure options available with:</para>
		<screen>
<prompt>$</prompt> <userinput>./configure --help</userinput>
		</screen>
	</sect2>
	<sect2>
		<title>Uninstalling</title>
		<para>Uninstalling is as easy as installing.</para>
		<screen>
<prompt>$</prompt> <userinput>cd florence-&version;</userinput>
<prompt>$</prompt> <userinput>su -c "make uninstall"</userinput>
		</screen>
		<para>For Ubuntu:</para><screen><prompt>$</prompt> <userinput>sudo make uninstall</userinput></screen>
	</sect2>
</sect1>
<sect1 id="usage">
	<title>Usage</title>
	<para>Florence aims at being easy. To launch Florence from the command line, type:</para>
		<screen>
<prompt>$</prompt> <userinput>florence</userinput>
		</screen>
	<para>Or, from GNOME desktop, click <guimenu>Applications</guimenu>-><guisubmenu>Accessibility</guisubmenu>-><guimenuitem>Florence Virtual keyboard</guimenuitem>.
If you prefer that Florence is launched at GNOME startup, choose the menu item <guimenu>System</guimenu>-><guisubmenu>Preferences</guisubmenu>-><guimenuitem>Sessions</guimenuitem>, click on the <guibutton>Startup programs</guibutton> tab, then click <guibutton>Add</guibutton> and enter <command>/usr/bin/florence</command> so Florence is launched with GNOME at next boot.
	</para>
	<para>Florence requires that GNOME accessibility be activated (it means that the at-spi daemon is running). If it is not activated, Florence will not start, but it will suggest you activate accessibility and restart GNOME instead. When GNOME is restarted and accessibility is activated, Florence will run as normal.</para>
	<para>When Florence is running, an icon should appear in your notification area, usually at the top right corner of the screen. Clicking of the icon makes Florence appear or disappear from the screen. Right clicking on it makes a menu appear. On this menu, you can use the <guimenuitem>quit</guimenuitem> item to stop Florence.</para>
	<sect2>
		<title>Florence modes</title>
		<para>Florence has several states affecting how it functions and how it interacts with the user.</para>
		<para>In auto-click mode, you don't have to use any mouse button to use the keyboard. You just have to put the pointer over a key and a timer is triggered. If the pointer stays over the key until the timer expires, the key is automatically 'clicked' (pressed). The duration of the timer can be set in the configuration GUI in milliseconds. When it is set to 0ms, auto-click mode is off: you have to point a key and click to trigger a key press.</para>
		<para>Another mode is the auto-hide mode. In this mode, Florence hides itself when it detects you don't need it. There are several rules to detect when Florence is needed and those rules rely heavily on the <ulink url="http://en.wikipedia.org/wiki/AT-SPI">at-spi</ulink> framework. For instance, Florence will be shown if you focus an editable widget, as it should probably be edited with a keyboard. Florence will hide itself when the editable widget is unfocused. This does not work if the widget isn't accessible with <ulink url="http://en.wikipedia.org/wiki/AT-SPI">at-spi</ulink>. In particular, QT3 widgets may not work properly with Florence. You should make sure your applications support at-spi if you intend to use Florence in hidden mode. When this mode is off, Florence is always visible on the screen.</para>
		<figure id="extensions">
			<title>Florence extensions</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/florence.png" format="PNG"/></imageobject>
					<textobject><phrase>Shows the extensions available.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<para>The above figure shows the different parts of the default layout. There are other layouts that can be selected in the settings dialog.</para>
		<para>The default keyboard layout can be extended with 3 extensions to the core keyboard. The arrows keypad is an extension added to the right of the core keyboard and contains the arrow keys along with navigation keys. The numpad extension contains the numeric keys and the function keys extension contains the function keys. Each extension can be activated and deactivated. The extensions are relative to the selected layout.</para>
	</sect2>
	<sect2 id="config">
		<title>Configuring</title>
		<para>The configuration dialog is accessible via the systray icon (right click on it and select <guimenuitem>Preferences</guimenuitem>) or via the command line with the -c or --config switch: <command>florence --config</command>. Hacking configuration is possible via gconf (see the hacking section)</para>
		<para>Some selected options not immediately applied until you click the 'Apply' button. Some other options are taken into account immediately but can be cancelled with the 'Cancel' button while they have not been applied.</para>
		<para>The settings options have been divided into 4 groups in order to ease searching and understanding them.</para>
		<sect3><title>Style configuration</title>
		<figure id="style">
			<title>Style preferences dialog</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/style.png" format="PNG"/></imageobject>
					<textobject><phrase>Shows the style preferences dialog.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<para>The following style options are configurable:</para>
		<orderedlist>
			<listitem><para>Style: select your style by clicking on the style icon.</para></listitem>
			<listitem><para>Default keys colour: set the background colour of normal keys.</para></listitem>
			<listitem><para>Activated keys colour: set the background colour of the keys that are pressed or locked.</para></listitem>
			<listitem><para>Focused key colour: set the background colour of the key that is under the pointer.</para></listitem>
			<listitem><para>Symbol colour: set the colour of the symbol or text printed on keys.</para></listitem>
			<listitem><para>Focus zoom: set the scaling factor of the focused key. Useful for visualy impaired people.</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Window configuration</title>
		<figure id="window">
			<title>Window preferences dialog</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/window.png" format="PNG"/></imageobject>
					<textobject><phrase>Shows the window preferences dialog.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<orderedlist>
			<listitem><para>Decorated: decorates the window with a title bar. Makes it easy to move the window.</para></listitem>
			<listitem><para>Transparent: allows you to see the windows behind the keyboard between the keys and to click on them.</para></listitem>
			<listitem><para>Resizable: allow you to set the visual scale of the keyboard with the window manager. Some window managers require the decorated option to be activated in order to resize the window.</para></listitem>
			<listitem><para>Task bar: make Florence appear on the desktop task bar.</para></listitem>
			<listitem><para>Always on top: tells to the window manager to always keep the keyboard on top of other windows.</para></listitem>
			<listitem><para>Opacity: set the window opacity in order to see the other windows through the keys. The window manager must support compositing and it must be activated for this option to work. For metacity, you must set the /apps/metacity/general/compositing_manager gconf key with gconf-editor or gconftool-2</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Behaviour configuration</title>
		<figure id="behaviour">
			<title>Behaviour preferences dialog</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/behaviour.png" format="PNG"/></imageobject>
					<textobject><phrase>Shows the behaviour preferences dialog.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<orderedlist>
			<listitem><para>Auto click: set the auto-click timer duration (0 deactivates the timer).</para></listitem>
			<listitem><para>Auto hide: switch auto-hide mode on and off.</para></listitem>
			<listitem><para>Move to near selected widget: this option is only available when auto-hide mode is activated. When activated, the keyboard will be moved to near the last selected editable widget every time you select a new one in order to minimize pointer distance from the keyboard.</para></listitem>
			<listitem><para>Intermediate icon: In auto-hide mode, don't show the keyboard directly on editable widgets, but make an intermediate icon appear instead. Click on the intermediate icon to show the actual keyboard. This option makes Florence less intrusive: for instance, if you want to read a document without editing, the intermediate icon takes less screen space than the keyboard.</para></listitem>
		</orderedlist>
		</sect3><sect3><title>Layout configuration</title>
		<figure id="layout">
			<title>Layout preferences dialog</title>
			<screenshot>
				<mediaobject>
					<imageobject><imagedata fileref="figures/layout.png" format="PNG"/></imageobject>
					<textobject><phrase>Shows the layout preferences dialog.</phrase></textobject>
				</mediaobject>
			</screenshot>
		</figure>
		<para>The first combo box allows you to choose your keyboard layout. The extensions are relative to the layout. They can be activated or deactivated independently. For the "Standard layout" layout, there are 4 extensions:</para>
		<orderedlist>
			<listitem><para>Navigation keys: activate/deactivate the arrows keypad.</para></listitem>
			<listitem><para>Numeric keys: activate/deactivate the numpad extension.</para></listitem>
			<listitem><para>Function keys: activate/deactivate the function keys extensions.</para></listitem>
			<listitem><para>Action keys: activate/deactivate the action keys extensions.</para></listitem>
		</orderedlist>
		</sect3>
	</sect2>
	<sect2>
		<title>Command line options</title>
		<para>Florence accepts the following command line options:</para>
		<orderedlist>
			<listitem><para>-h (--help): print help message and exit.</para></listitem>
			<listitem><para>-V (--version): print Florence version and exit.</para></listitem>
			<listitem><para>-c (--config): open configuration dialog.</para></listitem>
			<listitem><para>-d (--debug): launch Florence in verbose mode.</para></listitem>
			<listitem><para>-n (--no-gnome): use this option if you are not using the GNOME desktop environment. This will disable some GNOME specific features.</para></listitem>
			<listitem><para>-f (--focus) [window]: with this option, any florence input will go to the selected window. The window argument is the name of the window (the one that most window managers put in the title bar). if the window argument is not provided, florence will select the last focused window. This option is useful for window managers that don't support the 'not focusable' hint and focus the keyboard window instead of the output one. It can also be useful if you want to input text to a window that is not focused.</para></listitem>
			<listitem><para>-u (--use-config) file: use the configuration file provided instead of gconf. The configuration file is a key-value pair file with sections. An example of configuration file is provided at /usr/share/florence/florence.conf</para></listitem>
		</orderedlist>
	</sect2>
</sect1>
<sect1 id="tips">
	<title>Tips</title>
	<para>This section describes how to obtain the best from florence outside of the GNOME desktop</para>
	<sect2>
		<title>Using Florence without GNOME</title>
		<para>Florence is primarily intended to be used with the GNOME desktop. It makes use of the libraries that are commonly installed with a GNOME desktop. However, you can install those libraries on any desktop in order to run Florence. The packages necessary to have all the libraries are listed in the install section.</para>
		<para>For auto-hide mode to work, you need to start the at-spi registry daemon at session startup: Start at-spi registry daemon before Florence (at session startup):</para>
		<orderedlist>
			<listitem><para>Gentoo:</para>
			<screen>
<prompt>$</prompt> <userinput>/usr/libexec/at-spi-registryd &amp;</userinput>
			</screen></listitem>
			<listitem><para>Mandriva:</para>
			<screen>
<prompt>$</prompt> <userinput>/usr/lib/at-spi-registryd &amp;</userinput>
			</screen></listitem>
		</orderedlist>
		<para>Some distros may put the at-spi-registryd command elsewhere. Use the find command to find out where your distro put at-spi-registryd:</para>
		<screen>
<prompt>$</prompt> <userinput>find /usr -name at-spi-registryd</userinput>
		</screen>
		<para>Adapt according to the result.</para>
		<para>GNOME does start the daemon automatically if it is configured with the <command>gnome-at-property</command> dialog.</para>
		<para>If you are not interested in auto-hide mode, you can as well compile florence without at-spi: use the --without-at-spi configure option at configure time to save some disk space.</para>
		<para>You should run florence with the --no-gnome option. Modify the desktop file accordingly. not using this option will make florence prompt you with GNOME specific dialogs: not a big deal, but annoying anyway.</para>
		<para>If your DE is XDG compliant (like XFCE), Florence should be accessible via the menu. Anyway, starting florence from the command line will always work. If you don't have a systray, you can install <ulink url="http://peksystray.sourceforge.net/">peksystray</ulink>. You can also access the preferences dialog with:</para>
		<screen>
<prompt>$</prompt> <userinput>florence --config</userinput>
		</screen>
		<para>You can also skip the gconfd process by using a key-value pair file instead. Gconf libraries are still required to compile florence though. Use the --use-config option if you don't want to use gconf (see the configuration section for more information about this option)</para>
		<para>If your window manager does not support the always_on_top hint, you can use the keep_on_top parameter in gconf (/apps/florence/window/keep_on_top), or in the configuration file in the [window] section. When this parameter is checked, the keyboard will keep bringing itself back to front periodically, so it does not get covered by other windows.</para>
		<para>Note that QT3 applications don't support at-spi. Therefore you should not deactivate auto-hide mode on KDE3.</para>
	</sect2>
	<sect2>
		<title>Using Florence with GDM</title>
		<para>Using florence at GDM is possible with gdmlogin. gdmgreeter has some issues with accessibility currently.</para>
		<para>Configuring GDM to launch florence at login time involves editing 2 files in /etc/X11/gdm (requires root privileges): custom.conf and modules/AccessKeyMouseEvents.</para>
		<para>In /etc/X11/gdm/custom.conf, add the following lines in the [daemon] section (if they are not already present):</para>
		<programlisting>
Greeter=/usr/lib/gdmlogin 
GtkModulesList=gail:atk-bridge:/usr/lib/gtk-2.0/modules/libkeymouselistener:/usr/lib/gtk-2.0/modules/libdwellmouselistener
		</programlisting>
		<para>In /etc/X11/gdm/modules/AccessKeyMouseEvents, add the following lines:</para>
		<programlisting>
# Start florence virtual keyboard by pressing any mouse button for 2 seconds
&lt;Mouse1&gt; 1 2000 10000 /usr/bin/florence --focus --no-gnome --use-config /usr/share/florence/florence.conf
&lt;Mouse2&gt; 1 2000 10000 /usr/bin/florence --focus --no-gnome --use-config /usr/share/florence/florence.conf
&lt;Mouse3&gt; 1 2000 10000 /usr/bin/florence --focus --no-gnome --use-config /usr/share/florence/florence.conf
		</programlisting>
		<para>You should delete any other line starting with &lt;mouse1&gt;, &lt;mouse2&gt; or &lt;mouse3&gt; in order to prevent any other keyboard from starting instead of florence (like gok).</para>
		<para>When you have edited those two files, you should be able to start florence at next boot at gdm login. Press any mouse button for more than 2 seconds on the login window to do so.</para>
		<para>You can modify the keyboard settings for GDM as root with this command:</para>
		<screen>
<prompt>#</prompt> <userinput>florence -c --use-config /usr/share/florence/florence.conf</userinput>
		</screen>
	</sect2>
</sect1>
<sect1 id="faq">
	<title>FAQ (Frequently Asked Questions)</title>
	<qandaset defaultlabel='qanda'>
		<qandaentry>
			<question>
				<para>Does Florence support international keyboards with non-European characters (such as Arab, Chinese, Punjab, etc...)</para>
			</question>
			<answer>
				<para>Yes. Florence does support all the keyboards supported by X. In order to use a different keyboard, you have to use the setxkbmap command before launching Florence. For instance, to use an Arabic keyboard, use the following command:</para>
		<screen>
<prompt>$</prompt> <userinput>setxkbmap ar &amp;&amp; florence</userinput>
		</screen>
				<para>This works for any language supported by your X server</para>
			</answer>
		</qandaentry>
		<qandaentry>
			<question>
				<para>My layout is weird. Is there a way to change it?</para>
			</question>
			<answer>
				<para>Yes. One can change the layout with the settings dialog (layout tab). You can even make your own layout (see the hacking section of this documentation).</para>
			</answer>
		</qandaentry>
	</qandaset>
</sect1>
<sect1 id="bugs">
	<title>Known bugs</title>
	<para>Here is a list of known bugs. Those bugs do not have a fix yet. If you know how to fix one of them, please email the author.</para>
	<orderedlist>
		<listitem><para>Xorg RECORD extension is severely broken since Xorg 1.6: see bugs http://bugs.freedesktop.org/show_bug.cgi?id=20500 and http://bugs.freedesktop.org/show_bug.cgi?id=21971. As a result, Florence does not track hardware keyboard changes as it should and does not work properly with recent Xorg releases. Workaround: please configure Florence without the xrecord extension (--without-xrecord option)</para></listitem>
	</orderedlist>
</sect1>
<sect1 id="hacking">
	<title>Hacking</title>
	<para>Some extra configuration options are available in GConf (under apps/florence). You can modify configuration parameters from the configuration menu as well as from gconftool-2 or gconf-editor. Each configuration element has a detailed description in Florence gconf schema.</para>
	<sect2>
		<title>Create your own layout</title>
		<para>It is possible to create your own keyboard layout if those available by default are not suitable for your needs</para>
		<para>The layout files are available in the florence/layouts directory, under the installation data directory that is configured with the --datadir configure option, or the --prefix option if the datadir is not explicitly specified (in this case, it will be $prefix/share, most often this will be /usr/share, so /usr/share/florence/layouts would be the full path).</para>
		<para>The easiest way to create one's own layout file is to copy an existing one and to adapt it. The existing ones are florence.xml and compact.xml. Those are XML files with several elements. Those files can be validated with the $datadir/florence/florence.rnc file (relaxng compact syntax), or the equivalent $datadir/florence/relaxng/florence.rng (extended XML relaxng syntax). One can use the xmllint program to validate the layout file against the extended relaxng validation file.</para>
		<para>The root element of the XML layout file is the &lt;layout&gt; element. It contains the elements &lt;informations&gt;, &lt;keyboard&gt; and several &lt;extension&gt; elements. The &lt;informations&gt; element contains important meta-data about the layout file. Inside, one can modify the date, the author name and the most important: the name of the layout with the &lt;name&gt; element. This is the name that will appear in Florence's settings dialog in order to make it selectable.</para>
		<para>The layout data are contained in the &lt;keyboard&gt; and &lt;extension&gt; elements.</para>
		<para>The &lt;keyboard&gt; element contains the main data of the layout. The sub-elements &lt;width&gt; and &lt;height&gt; contain respectively the relative width and height of the main keyboard. Every key must be inside the rectangle defined by those dimensions. Then, one can find a list of &lt;key&gt; elements, each corresponding to one key on the keyboard. each key has a &lt;code&gt; element that defines which key it is. The key code is the keycode of the X server. The keycodes of the real keyboard, as configured in the X server can be obtained with the xmodmap -pke command. The &lt;xpos&gt; and &lt;ypos&gt; elements give the position of the key inside the keyboard. This position is the center of the key. By default, a key has a width of 2 and a height of 2. One can change the size of the key with the optional &lt;width&gt; and &lt;height&gt; elements. The shape of the key will be defined by the selected style. By default, it will use the style element named "default". One can assign another shape to the key with the optional &lt;shape&gt; element, that must contain an existing shape name in the selected style.</para>
		<para>One can then define several &lt;extension&gt; elements. Each extension has a &lt;name&gt; element that will be displayed in the settings dialog to activate or deactivate this extension. The extensions must also define a &lt;identifiant&gt; element in order to identify the extension in a language independent manner. This allow to save the extension preferences in gconf. the &lt;placement&gt; element indicates where the extension must be placed, relatively to the main keyboard. It can take 4 different values: "right", "left", "top" and "bottom". If several extensions have the same placement, they will be ordered by the order in which they appear in the layout file. Then comes the &lt;keyboard&gt; element, that is the same as the keyboard element mentioned above and that defines the keys of the extension.</para>
		<para>The layout file so created in the $datadir/florence/layouts directory will automatically be selectable from the settings dialog of Florence.</para>
		<para>If you think that your layout file could be of any use to other people than yourself, please, consider sending it by email to f.agrech@gmail.com for future inclusion in Florence distribution.</para>
	</sect2>
</sect1>
<sect1 id="alternatives">
	<title>Alternatives</title>
	<para>There are other alternative virtual keyboard for GNOME that may fit your needs better than Florence. Here is a list of the main alternatives.</para>
	<orderedlist>
		<listitem><para><ulink url="http://www.gok.ca/gok">GOK</ulink> is the default GNOME onscreen keyboard. It provides more features than Florence for disabled people. It can be used with special devices like switches and joysticks. GOK provides complete access to the desktop. It can be used to move and resize windows and to use any widget. It ia application aware and provides a predictive dictionary that make it an effcient keyboard. It is more focussed on accessibility than on aestetics. The high number of features makes it more complex. Florence is arguably prettier and easier to use for people who can easily use a pointing device. GOK is the only option for disabled people who can't use a pointing device.</para></listitem>
		<listitem><para>XVKBD is a simple and very mature virtual keyboard. It does not depend on GNOME. Like GOK, it provides word completion. Like Florence, it has an ato-click feature but it lacks an auto-hide mode and does not integrate with GNOME as much as Florence. This is the perfect keyboard for simple window managers. Florence is arguably prettier and better integrated in GNOME.</para></listitem>
		<listitem><para>Onboard is the default Ubuntu keyboard. It runs with python, which is common in modern linux distributions. It focuses on simplicity rather than features. It is pretty and easy to use. It is less customizable than Florence and does not provide an auto-hide feature. Perfect for casual usage on Ubuntu.</para></listitem>
		<listitem><para>GTKeyboard is the FSF keyboard.</para></listitem>
	</orderedlist>
	<table>
		<title>Keyboard features</title>
		<tgroup cols="6">
			<colspec colname="keyboard"/>
			<colspec colname="transparency"/>
			<colspec colname="auto hide"/>
			<colspec colname="auto click"/>
			<colspec colname="scanning"/>
			<colspec colname="word completion"/>
			<thead>
				<row>
					<entry>keyboard</entry>
					<entry>transparency</entry>
					<entry>auto hide</entry>
					<entry>auto click</entry>
					<entry>scanning</entry>
					<entry>word completion</entry>
				</row>
			</thead>
			<tbody>
				<row>
					<entry>Florence</entry>
					<entry>Yes</entry>
					<entry>Yes</entry>
					<entry>Yes</entry>
					<entry>No</entry>
					<entry>No</entry>
				</row>
				<row>
					<entry>GOK</entry>
					<entry>No</entry>
					<entry>Yes</entry>
					<entry>Yes</entry>
					<entry>Yes</entry>
					<entry>Yes</entry>
				</row>
				<row>
					<entry>XVKBD</entry>
					<entry>No</entry>
					<entry>No</entry>
					<entry>Yes</entry>
					<entry>No</entry>
					<entry>Yes</entry>
				</row>
				<row>
					<entry>Onboard</entry>
					<entry>No</entry>
					<entry>No</entry>
					<entry>Yes</entry>
					<entry>No</entry>
					<entry>No</entry>
				</row>
			</tbody>
		</tgroup>
	</table>
</sect1>
<sect1 id="gethelp">
        <title>Getting help</title>
        <para>You can get help on the <ulink url="https://sourceforge.net/forum/forum.php?forum_id=784280">forum</ulink>, or you can ask for help by email at f.agrech@gmail.com</para>
</sect1>
<sect1 id="help">
	<title>Contribute</title>
	<para>If you want to help the Florence project, please send an email to f.agrech@gmail.com</para>
</sect1>
&gfdl;
</article>

