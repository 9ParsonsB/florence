<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Florence Virtual Keyboard for Qt: key.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>key.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//    This file is part of Florence Virtual Keyboard, QT version.</span>
<a name="l00002"></a>00002 <span class="comment">//    Copyright (C) 2011  iKare Corporation</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">//    This program is free software: you can redistribute it and/or modify</span>
<a name="l00005"></a>00005 <span class="comment">//    it under the terms of the GNU General Public License as published by</span>
<a name="l00006"></a>00006 <span class="comment">//    the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00007"></a>00007 <span class="comment">//    (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">//    This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment">//    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment">//    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment">//    GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">//    You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment">//    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef KEY_H</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define KEY_H</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;QGraphicsSvgItem&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;QDomElement&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;QPainter&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;QTimer&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include "style.h"</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include "keymap.h"</span>
<a name="l00026"></a>00026 
<a name="l00078"></a><a class="code" href="class_key.html">00078</a> <span class="keyword">class </span><a class="code" href="class_key.html" title="This class represents a key on the keyboard.">Key</a> : <span class="keyword">public</span> QGraphicsSvgItem
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080     Q_OBJECT
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="keyword">public</span>:
<a name="l00086"></a><a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0">00086</a>     <span class="keyword">enum</span> <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0">key_status</a> {
<a name="l00087"></a><a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b04c4c08650f2ddf9403aefb3f408c33bd">00087</a>         <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b04c4c08650f2ddf9403aefb3f408c33bd">KEY_RELEASED</a>, 
<a name="l00088"></a><a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0f04aa88c730dbb7dd5e0f69e9f914988">00088</a>         <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0f04aa88c730dbb7dd5e0f69e9f914988">KEY_PRESSED</a>, 
<a name="l00089"></a><a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b050b48bddc4a33423c0b54c189d0eb940">00089</a>         <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b050b48bddc4a33423c0b54c189d0eb940">KEY_LATCHED</a>, 
<a name="l00090"></a><a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0289a28bbb2e5258f02699231832fff81">00090</a>         <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0289a28bbb2e5258f02699231832fff81">KEY_LOCKED</a> 
<a name="l00091"></a>00091     };
<a name="l00092"></a>00092 
<a name="l00100"></a>00100     <a class="code" href="class_key.html#89c9af3b887252e24c938c0eac93ea8d" title="Constuctor.">Key</a>( QDomElement el, <a class="code" href="class_settings.html" title="This class records all the settings of the Florence widget.">Settings</a> *settings );
<a name="l00101"></a>00101 
<a name="l00108"></a>00108     <span class="keywordtype">void</span> <a class="code" href="class_key.html#6ec9e31aeddaf2326dccef03b663f22a" title="Notifies the key that it is pointed either by touch or mouse.">hoverEnterEvent</a>();
<a name="l00115"></a>00115     <span class="keywordtype">void</span> <a class="code" href="class_key.html#8802d534adf02f9c9cfed46e809817a7" title="Notifies that the pointer has left the key.">hoverLeaveEvent</a>();
<a name="l00122"></a>00122     <span class="keywordtype">void</span> <a class="code" href="class_key.html#2029beed7ec42dc8e443a1ac4ea133b7" title="Notifies the key of a press event.">mouseReleaseEvent</a>();
<a name="l00130"></a>00130     <span class="keywordtype">bool</span> <a class="code" href="class_key.html#ba992c721ccefaf691c49e9e8103bd85" title="Unlatches the key.">unlatch</a>();
<a name="l00137"></a>00137     <span class="keywordtype">void</span> <a class="code" href="class_key.html#62825187a231dc66d4b5b4010f4b96f4" title="Press the key.">press</a>();
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 signals:
<a name="l00147"></a>00147     <span class="keywordtype">void</span> <a class="code" href="class_key.html#1f7c15f42ded174f62dd5bbfc8d1dfd1" title="Key pressed signal.">keyPressed</a>( <span class="keyword">enum</span> <a class="code" href="class_symbol.html#dfa1c247f5eef534856d3bb843a2e650">Symbol::symbol_role</a> role, QString text );
<a name="l00148"></a>00148 
<a name="l00155"></a>00155     <span class="keywordtype">void</span> <a class="code" href="class_key.html#4655bae677b4121a60710f0adf034aaf" title="Key latched.">latchKey</a>( <a class="code" href="class_key.html" title="This class represents a key on the keyboard.">Key</a> *k );
<a name="l00162"></a>00162     <span class="keywordtype">void</span> <a class="code" href="class_key.html#4d74a27ed084fb240f2f3f1e7ce47e72" title="Key unlatched.">unlatchKey</a>( <a class="code" href="class_key.html" title="This class represents a key on the keyboard.">Key</a> *k );
<a name="l00169"></a>00169     <span class="keywordtype">void</span> <a class="code" href="class_key.html#8e6c1cb96b9f9b3f223fcbcefc1c3647" title="Unlatch all keys.">unlatchAll</a>();
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="keyword">public</span> slots:
<a name="l00177"></a>00177     <span class="keywordtype">void</span> <a class="code" href="class_key.html#c10ea65a60e5bc0e890bb8f80c9ddbcd" title="Changes the style used to paint the key.">setStyle</a>( <a class="code" href="class_style.html" title="Represents the Style used to paint the keyboard.">Style</a> *style );
<a name="l00181"></a>00181     <span class="keywordtype">void</span> <a class="code" href="class_key.html#1d65dc0f8b229201724d14ef98484315" title="repaints the key.">redraw</a>();
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 <span class="keyword">protected</span>:
<a name="l00184"></a>00184     QRectF boundingRect() <span class="keyword">const</span>;
<a name="l00185"></a>00185     QPainterPath shape() <span class="keyword">const</span>;
<a name="l00186"></a>00186     <span class="keywordtype">void</span> paint( QPainter *painter, <span class="keyword">const</span> QStyleOptionGraphicsItem *option, QWidget *widget = 0 );
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="keyword">private</span>:
<a name="l00189"></a>00189     <a class="code" href="class_settings.html" title="This class records all the settings of the Florence widget.">Settings</a> *settings;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     quint8 code;
<a name="l00192"></a>00192     <span class="keyword">enum</span> <a class="code" href="class_key.html#b2dd538f6e48cfa65abb8a9b2547f6b0">key_status</a> status;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     QTimer releaseTimer;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     qreal width, height;
<a name="l00197"></a>00197     QString keyShape;
<a name="l00198"></a>00198     <a class="code" href="class_keymap.html" title="Represents a language dependant map to translate key codes to symbols.">Keymap</a> *keymap;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="keywordtype">bool</span> hovered;
<a name="l00201"></a>00201     QRectF bounds;
<a name="l00202"></a>00202     QPainterPath keyBounds;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     QSvgRenderer *activeRenderer;
<a name="l00205"></a>00205     QSvgRenderer *pressedRenderer;
<a name="l00206"></a>00206     QSvgRenderer *latchedRenderer;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="keyword">private</span> slots:
<a name="l00209"></a>00209     <span class="keywordtype">void</span> release();
<a name="l00210"></a>00210 };
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="preprocessor">#endif // KEY_H</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Feb 27 11:44:53 2011 for Florence Virtual Keyboard for Qt by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
